Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const node = require('@sentry/node');

/**
 * Extracts the SHA-256 hash from a server function pathname.
 * Server function pathnames are structured as `/_serverFn/<hash>`.
 * This function matches the pattern and returns the hash if found.
 *
 * @param pathname - the pathname of the server function
 * @returns the sha256 of the server function
 */
function extractServerFunctionSha256(pathname) {
  const serverFnMatch = pathname.match(/\/_serverFn\/([a-f0-9]{64})/i);
  return serverFnMatch?.[1] ?? 'unknown';
}

/**
 * Returns span options for TanStack Start middleware spans.
 */
function getMiddlewareSpanOptions(name) {
  return {
    op: 'middleware.tanstackstart',
    name,
    attributes: {
      [node.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'manual.middleware.tanstackstart',
      [node.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'middleware.tanstackstart',
    },
  };
}

exports.extractServerFunctionSha256 = extractServerFunctionSha256;
exports.getMiddlewareSpanOptions = getMiddlewareSpanOptions;
//# sourceMappingURL=utils.js.map
